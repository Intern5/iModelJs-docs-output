<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>RpcInterface - iModelJs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/prism.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico' /> 
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">
        <header id="main-header">
            <div class='row nav-container'>
                <nav id='main-navbar' class="navbar navbar-expand-md navbar-light">
                    
                    <button class="navbar-toggler navbar-toggler-left custom-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class='icon icon-menu'></i>
                        </span>
                    </button>
                    <div class="nav-title-container">
                        <a class="navbar-brand " href="https://imodeljs.github.io/iModelJs-docs-output//" class="col-md-3">
                            <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico" />
                            <h1 id="site-title">iModelJs</h1>
                        </a>
                    </div>
                    <div id='header-tabs' class='col-sm-6 col-md-3 nav-tabs-container'>
                        <nav class="navbar navbar-expand-md navbar-light">
                             <ul class="bwc-tabs-horizontal green"><li class="active"><a href="https://imodeljs.github.io/iModelJs-docs-output//overview">Overview</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li></ul> 
                        </nav>
                    </div>            </nav>
        </div>
        </header>
        

<div id='main-wrapper'>
    <div id='table-of-contents'>
        <span class='search-bar'>
          <li>
            <div id='search-container'>
            </div>
          </li>
          <script>
            (function() {
              var cx = '000629069474334212860:yxwzhn4umym';
              var gcse = document.createElement('script');
              gcse.type = 'text/javascript';
              gcse.async = true;
              gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(gcse, s);
            })();
          </script>
          <gcse:searchresults-only gname="sitesearch" resultSetSize="7"></gcse:search>
        </span>
        
        <ul id='main-navigation-list'>
            <html><head></head><body><h3 id="overview">Overview</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./overview/imodels" class="table-of-contents-link">iModels</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./overview/imodelhub" class="table-of-contents-link">iModelHub</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./overview/imodel-bridges" class="table-of-contents-link">iModel Bridges</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary" class="table-of-contents-link">Glossary</a></li>
        </ul>
        </body></html>
        </ul>    </div>
    <div class='row documentation-main'>
        <article id="main" name="main-content">
            <div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//overview/">overview</a> > RpcInterface</div>
            <div class="edit-link"><span title="Page edit feature coming soon">Edit this page</span></div>
            <h1 id="rpcinterface">RpcInterface</h1>
<p>As described in the <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/softwarearchitecture'>software architecture overview</a>, the functionality of an iModelJs app is typically implemented in separate components, which run in different threads, processes, and/or machines. These components communicate through interfaces, which are called <em>RpcInterfaces</em> because they use remote procedure calls, or <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary/#rpc'>RPC</a>.</p>
<p><img src=".././SoftwareArchitecture-RPC1.png" alt="SoftwareArchitecture-Rpc"></p>
<p>The diagram above shows an app frontend requesting operations from some backend. The frontend in this case is the client and the backend is the server. In general, the terms <em>client</em> and <em>server</em> specify the two <em>roles</em> in an RpcInterface:</p>
<ul>
<li><p><em>client</em> -- the code that uses an RpcInterface and calls its methods. A client could be the <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/app/#app-frontend'>frontend of an app</a>, the <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/app/#app-backend'>backend of an app</a>, a <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/app/#imodel-services'>service</a>, or an <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/app/#imodel-agents'>agent</a>. A client could be <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary/#frontend'>frontend code</a> or <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary/#backend'>backend code</a>.</p>
</li>
<li><p><em>server</em> -- the code that implements and exposes an RpcInterface to clients. A server could the <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/app/#app-backend'>backend of an app</a> or a <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/app/#imodel-services'>service</a>. A server is always <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary/#backend'>backend code</a>.</p>
</li>
</ul>
<p>As shown, client and server work with the <em>RpcManager</em> to use an RpcInterface. RpcManager exposes a client &quot;stub&quot; on the client side. This stub forwards the request. On the other end, RpcManager uses a server dispatch mechanism to rely the request to the implementation in the server. In between the two is a transport mechanism that marshalls calls from the client to the server over an appropriate communications channel. The transport mechanism is encapsulated in a <em>configuration</em> that is applied at runtime.</p>
<p>A typical app frontend will use more than one remote component. Likewise, a server can contain and expose more than one component. For example, the app frontend might need two interfaces, Interface 1 and Interface 2. In this example, both are implemented in Backend A.</p>
<p><img src=".././SoftwareArchitecture-RPC2.png" alt="SoftwareArchitecture-Rpc"></p>
<p>An app frontend can just as easily work with multiple backends to obtain the services that it needs. One of the configuration parameters for an RpcInterface is the identity of the backend that provides it. For example, suppose that the frontend also needs to use Interface 3, which is is served out by Backend B.</p>
<p><img src=".././SoftwareArchitecture-RPC3.png" alt="SoftwareArchitecture-Rpc"></p>
<p>The RPC transport configuration that the frontend uses for Backend B can be different from the configuration it uses for Backend A. In fact, that is the common case. If Backend A is the app&apos;s own backend and Backend B is a remote service, then the app will use an RPC configuration that matches its own configuration for A, while it uses a Web configuration for B.</p>
<p>As noted above, the client of an RPC interface can be frontend or backend code. That means that backends can call on the services of other backends. In other words, a backend can be a server and a client at the same time. A backend configures the RpcInterfaces that it <em>implements</em> by calling the initializeImpl method on RpcManager, and it configures the RpcInterfaces that it <em>consumes</em> by calling initializeClient. For example, suppose Backend B needs the services of Backend C.</p>
<p><img src=".././SoftwareArchitecture-RPC4.png" alt="SoftwareArchitecture-Rpc"></p>
<h2 class="h-rpcinterfaces-are-typescript-classes"><a id="rpcinterfaces-are-typescript-classes" class="heading-anchor" href="#%s"></a>RpcInterfaces are TypeScript Classes</h2>
<p>An RpcInterface is a normal TypeScript class. A client requests a server operation by calling an ordinary TypeScript method, passing parameters and getting a result as ordinary TypeScript objects. The client gets the TypeScript interface object from the RpcManager. As noted above, the client  does not deal with communication</p>
<p>Likewise, a server implements and expose operations by writing normal TypeScript classes. A server registers its implementation objects with RcpManager. And, RpcManager dispatches in-coming requests from clients to those implementation objects.</p>
<p>See <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/rpcinterface'>learning RpcInterfaces</a> for information on how to write, use, and expose RpcInterfaces.</p>
<h2 class="h-rpc-configuration"><a id="rpc-configuration" class="heading-anchor" href="#%s"></a>RPC Configuration</h2>
<p>The <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/softwarearchitecture/#comparison'>architecture comparison</a> diagram shows the role of RpcInterfaces in supporting portable, resuable app components. A different transport mechanism in each configuration. RpcManager is used by clients and servers to <a href="#rpc-configuration">apply configurations to RpcInterfaces</a>.</p>
<h3 class="h-web-rpc-configuration"><a id="web-rpc-configuration" class="heading-anchor" href="#%s"></a>Web RPC configuration</h3>
<p>The Web RPC configuration transforms client calls on an <a href="#RpcInterface">RpcInterface</a> into HTTP requests. Provides endpoint-processing and call dispatching in the server process. The iModelJs cloud RPC configuration is highly parameterized and can be adapted for use in many environments. This configuration is designed to cooperate with routing and authentication infrastructure. See <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/softwarearchitecture/#web'>Web architecture</a>.</p>
<p>iModelJs comes with an implementation of a Web RPC configuration that works with the Bentley Cloud infrastructure. It is relatively straightforward for developers to write custom Web RPC configurations that works with other infrastructures.</p>
<h3 class="h-desktop-rpc-configuration"><a id="desktop-rpc-configuration" class="heading-anchor" href="#%s"></a>Desktop RPC configuration</h3>
<p>The iModelJs desktop RPC configuration is specific to the Electron framework. It marshalls calls on an <a href="#RpcInterface">RpcInterface</a> through high-bandwidth, low-latency pipes between cooperating processes on the same computer. It provides endpoint-processing and call dispatching in thebackend process. See <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/softwarearchitecture/#desktop'>Desktop architecture</a>.</p>
<h3 class="h-in-process-rpc-configuration"><a id="in-process-rpc-configuration" class="heading-anchor" href="#%s"></a>In-process RPC configuration</h3>
<p>The in-process RPC configuration marshalls calls on an <a href="#RpcInterface">RpcInterface</a> across threads within a single process. It also provides call dispatching in the backend thread. See <a href='https://imodeljs.github.io/iModelJs-docs-output//./overview/softwarearchitecture/#mobile'>Mobile architecture</a>.</p>
<h2 class="h-rpcinterface-performance"><a id="rpcinterface-performance" class="heading-anchor" href="#%s"></a>RpcInterface Performance</h2>
<p>Apps must be designed with remote communication in mind. In the case where a server or app backend is accessed over the Internet, both bandwidth and latency can vary widely. Therefore, care must be taken to limit number and size of round-trips between clients and servers. RpcInterface methods must be &quot;chunky&quot; and not &quot;chatty&quot;.</p>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>15 August, 2018 @ 08:10:14 pm -04:00</span>
            </p>

            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div id='inner-table-of-contents'>
        <!--
            - If the page is active
            - Get all headings and subheadings and list them
         -->
        
        
        
        
        <div id='sticky-container' style="top: 76px; position: fixed;">
          <h4 class='heading'>On this page</h4>
            <div id="overview-container" class="clusterize-scroll">
              <ul id='nav' class='right-nav nav flex-column clusterize-content'>
                      <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#rpcinterfaces-are-typescript-classes">RpcInterfaces are TypeScript Classes</a>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-rpc-configuration" class='title' href="#rpc-configuration"/>
                    <b class='dropdown-menu-title menu-text'>RPC Configuration</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-rpc-configuration" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#web-rpc-configuration">Web RPC configuration</a>
                            </li>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#desktop-rpc-configuration">Desktop RPC configuration</a>
                            </li>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#in-process-rpc-configuration">In-process RPC configuration</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#rpcinterface-performance">RpcInterface Performance</a>
            </li>
         
              </ul>
            </div>
          </div>
        
    </div>
</div>


    <footer id='main-footer'>
        <div id='footer-content-container'>
           <div class='footer-footer'>
               <p>Copyright 2018 Bentley Systems, Incorporated</p>
            </div>
        </div>
    </footer>
</div>
    <a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
    <script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js" ></script>
</body>

</html><script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/monaco-editor/min/vs/loader.js"></script>
<script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/ts-playground.js"></script>
