<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Schema Customization - iModelJs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/prism.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico' /> 
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">
        <header id="main-header">
            <div class='row nav-container'>
                <nav id='main-navbar' class="navbar navbar-expand-md navbar-light">
                    
                    <button class="navbar-toggler navbar-toggler-left custom-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class='icon icon-menu'></i>
                        </span>
                    </button>
                    <div class="nav-title-container">
                        <a class="navbar-brand " href="https://imodeljs.github.io/iModelJs-docs-output//" class="col-md-3">
                            <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico" />
                            <h1 id="site-title">iModelJs</h1>
                        </a>
                    </div>
                    <div id='header-tabs' class='col-sm-6 col-md-3 nav-tabs-container'>
                        <nav class="navbar navbar-expand-md navbar-light">
                             <ul class="bwc-tabs-horizontal green"><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//overview">Overview</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class="active"><a href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li></ul> 
                        </nav>
                    </div>                </nav>
            </div>

        </header>
        
<div id='main-wrapper'>
    <div id='table-of-contents'>
        <span class='search-bar'>
          <li>
            <div id='search-container'>
            </div>
          </li>
        </span>
        
        <ul id='main-navigation-list'>
            <html><head></head><body><h3 id="bis">BIS</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//bis/" class="table-of-contents-link">Introduction</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/modeling-with-bis" class="table-of-contents-link">Modeling with BIS</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/bis-organization" class="table-of-contents-link">BIS Organization</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/bis-ecosystem" class="table-of-contents-link">BIS Ecosystem</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/fabric-of-the-universe" class="table-of-contents-link">Fabric of the Universe</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/element-fundamentals" class="table-of-contents-link">Element Fundamentals</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/codes" class="table-of-contents-link">Codes</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/elementaspect-fundamentals" class="table-of-contents-link">ElementAspect Fundamentals</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/model-fundamentals" class="table-of-contents-link">Model Fundamentals</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/relationship-fundamentals" class="table-of-contents-link">Relationship Fundamentals</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schemas-domains" class="table-of-contents-link">Schemas (&#x201C;Domains&#x201D;)</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/information-hierarchy" class="table-of-contents-link">Information Hierarchy</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/physical-models-and-elements" class="table-of-contents-link">Physical Models and Elements</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/functional-models-and-elements" class="table-of-contents-link">Functional Models and Elements</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/information-models-and-elements" class="table-of-contents-link">Information Models and Elements</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/categories" class="table-of-contents-link">Categories</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schema-customization" class="table-of-contents-link">Schema Customization</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/appendix-a-data-evolution-across-time" class="table-of-contents-link">Data Evolution Across Time</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schema-versioning-and-generations" class="table-of-contents-link">Schema Versioning</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/glossary" class="table-of-contents-link">BIS Glossary</a></li>
        </ul>
        <!-- TODO: The following are not linked in...?
        ./domains/*
        ./intro/analysis-models-and-elements.md
        ./intro/appendix-c-bis-domain-design-fundamentals.md
        ./intro/bis-schema-validation.md
        ./intro/documents.md
        ./intro/dynamic-data.md
        ./intro/forms-profiles-and-features.md
        ./intro/functional-models-and-elements.md
        ./intro/information-models-and-elements.md
        ./intro/mixins.md
        ./intro/requirements.md
        ./intro/types-instances-and-catalogs.md
        ./intro/units.md
        -->
        <p>&#xA0;</p>
        <h3 id="bis naming guidelines">BIS Naming Guidelines</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/rules-and-recommendations" class="table-of-contents-link">Rules and Recommendations</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/special-terms" class="table-of-contents-link">Special Terms</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/summary-of-exceptions" class="table-of-contents-link">Summary of Exceptions</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/standard-abbreviations-and-acronyms" class="table-of-contents-link">Abbreviations and Acronyms</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./bis/naming-guidelines/standard-relationship-strengths-names" class="table-of-contents-link">Relationship &#x201C;Strengths&#x201D;</a></li>
        </ul>
        </body></html>
        </ul>    </div>
    <div class='row documentation-main'>
        <article id="main" name="main-content">
            <div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//bis/">bis</a> > <a href="https://imodeljs.github.io/iModelJs-docs-output//bis/intro/">intro</a> > schema-customization</div>
            <div class="edit-link">***REMOVED***</div>
            <h1 id="schema customization">Schema Customization</h1>
<!-- TODO
COMMENT: This is really about dynamic metadata, not data. Or you could just call it extended metadata... the point is not that it is changing (it is not), it is simply metadata that extends beyond the current state of BIS.
-->
<h2 class="h-introduction"><a id="introduction" class="heading-anchor" href="#%s"></a>Introduction</h2>
<p>While BIS models a significant portion of the world of built infrastructure, and new discipline-specific domain schemas are being added all the time, there will inevitably be a need to store data not-yet-covered by BIS. Some common cases where this situation may arise are:</p>
<ul>
<li>Customizations and extensions to existing BIS concepts (often per-project or per-company)</li>
<li>Vendor-specific information</li>
<li>Transfer of information from other infrastructure-related databases (e.g. via iModel bridges).</li>
<li>Modeling of concepts that do not currently exist in BIS.</li>
<li>The need to add unstructured information to Elements.</li>
</ul>
<p>This page discusses strategies available for creating and controlling this data, referred to as &quot;custom data&quot;, and provides best practice advice. Custom data should be modeled differently depending on the nature of the data and how the property definitions and values vary.</p>
<p>Properties that vary per class or type should be modeled using property definitions, properties which vary per instance should be modeled using Json.</p>
<!-- TODO
## Dynamic Schemas

### Creating Dynamic Schemas

### Inherent Risks of Dynamic Schemas

### Allowed and Forbidden Capabilities in Dynamic Schemas
-->
<h2 class="h-vendor-data-and-related-catalogs"><a id="vendor-data-and-related-catalogs" class="heading-anchor" href="#%s"></a>Vendor Data and Related Catalogs</h2>
<p>Vendors will often need to define Element subclasses and associated Type subclasses. For example a pump vendor might define a Pump subclass (BigCo:MonsterPump) and a related PumpType subclass (BigCo:MonsterPumpType).</p>
<p>BigCo:MonsterPumpType might define four new properties:</p>
<ul>
<li>ModelNumber</li>
<li>Power</li>
<li>InletDiameter</li>
<li><p>OutletDiameter</p>
<p>BigCo:MonsterPump might define one new property:</p>
</li>
<li><p>OutletLength</p>
</li>
</ul>
<p>When BigCo&apos;s pump catalog is distributed, it will include:</p>
<ul>
<li>BigCo:MonsterPump class definition</li>
<li>BigCo:MonsterPumpType class definition</li>
<li>Multiple BigCo:MonsterPumpType instances (defining the pump types available for purchase)</li>
</ul>
<!-- TODO
QUESTION: *IN PRACTICE, DOES THIS MEAN THAT IF I WANT TO CHANGE A PUMP FROM BIGCO TO LITTLECO, THEN I NEED TO CHANGE THE CLASS OF PUMP AS WELL (IE - I NEED TO DELETE AND RECREATED THE PUMP)?*
-->
<h2 class="h-data-imported-from-other-databases-including-via-imodel-bridges"><a id="data-imported-from-other-databases-including-via-imodel-bridges" class="heading-anchor" href="#%s"></a>Data Imported from Other Databases (including via iModel Bridges)</h2>
<p>The technology (often iModel bridges) that converts data from other databases into BIS data will usually need to convert from the class structure in the native database to a BIS class structure. It is rare that a BIS schema will work &quot;out of the box&quot;. Typically a dynamic schema will need to be defined by the converter and then the data converted from the native DB into instance of the new dynamic schema&apos;s classes (likely along with some instances of standard BIS classes).</p>
<h2 class="h-dynamic-schema-minor-change-considerations"><a id="dynamic-schema-minor-change-considerations" class="heading-anchor" href="#%s"></a>Dynamic Schema Minor Change Considerations</h2>
<p>As dynamic schemas are extensions of BIS schemas, they must follow the rules of BIS schemas to prevent upgrade problems. These rules are defined in <a href='https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schema-versioning-and-generations'>Schema Versioning and Generations</a>. The most notable of these rules is that classes and properties cannot be removed or significantly redefined. In general, only additions to schemas are allowed.</p>
<h2 class="h-minor-bis-schema-upgrade-considerations"><a id="minor-bis-schema-upgrade-considerations" class="heading-anchor" href="#%s"></a>Minor (BIS) Schema Upgrade Considerations</h2>
<p>As defined in <a href='https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schema-versioning-and-generations'>Schema Versioning and Generations</a>, BIS schemas may be upgraded at almost any time within a generation. The classes in dynamic schemas always subclass from BIS classes, so they may be affected by these minor upgrades at almost anytime.</p>
<p>The biggest danger from these minor schema upgrades is that a BIS class may add a property that has the same name as a property in a dynamic subclass. This class will cause ????????????? when the upgraded schema is imported into a BIS repository.</p>
<p>Class name conflicts (a class being added in BIS that has the same name as a class in a dynamic schema) is not a technical problem as the classes are scoped by the name of the schema that contains them. The duplicate class names can cause user confusion, however.</p>
<h2 class="h-generational-bis-schema-upgrade-considerations"><a id="generational-bis-schema-upgrade-considerations" class="heading-anchor" href="#%s"></a>Generational (BIS) Schema Upgrade Considerations</h2>
<p>As defined in <a href='https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/schema-versioning-and-generations'>Schema Versioning and Generations</a>, generational changes allow radical changes to schemas and must be accompanied by code that understands how to map data (Elements and Models) from one generation of schemas to another. The generational mapping code can potentially be very complex; for example, it may include:</p>
<ul>
<li>1:1, 1:N, N:1, N:N instance mapping</li>
<li>1:1, 1:N, N:1, N:N property mapping</li>
<li>Moving of properties between classes (as a simple case, from PhysicalElementType subclass to its related PhysicalElement subclass)</li>
<li>Rearrangement of Model hierarchy</li>
</ul>
<!-- TODO
There needs to be a default strategy for converting the dynamic schemas to descent from the new BIS schemas, and for the conversion of dynamic data. We cannot rely on custom code to perform the upgrade; the entity that created the custom schemas may not even be in business any more.
-->
            <p class='last-updated'>Last Updated:
                <span class='date-updated'>23 July, 2018 @ 08:06:48 pm -04:00</span>
            </p>

            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div id='inner-table-of-contents'>
        <!--
            - If the page is active
            - Get all headings and subheadings and list them
         -->
        
        
        
        
        <div id='sticky-container' style="top: 76px; position: fixed;">
          <h4 class='heading'>On this page</h4>
            <div id="overview-container" class="clusterize-scroll">
              <ul id='nav' class='right-nav nav flex-column clusterize-content'>
                      <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#introduction">Introduction</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#vendor-data-and-related-catalogs">Vendor Data and Related Catalogs</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#data-imported-from-other-databases-including-via-imodel-bridges">Data Imported from Other Databases (including via iModel Bridges)</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#dynamic-schema-minor-change-considerations">Dynamic Schema Minor Change Considerations</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#minor-bis-schema-upgrade-considerations">Minor (BIS) Schema Upgrade Considerations</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#generational-bis-schema-upgrade-considerations">Generational (BIS) Schema Upgrade Considerations</a>
            </li>
         
              </ul>
            </div>
          </div>
        
    </div>
</div>


    <footer id='main-footer'>
        <div id='footer-content-container'>
           <div class='footer-footer'>
               <p>Copyright 2018 Bentley Systems, Incorporated</p>
            </div>
        </div>
    </footer>
</div>
    <a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
    <script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js" ></script>
</body>

</html>