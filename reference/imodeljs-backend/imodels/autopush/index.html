<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bentley Docs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output/styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output/styles/prism.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">

</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output/ class='indexSeg'>
    <span id="contentLoader"><p>Woah!  This page has a great deal of content...  Give us a second to load it.</p></span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">
    <header id="main-header">
        <div class='row no-gutters nav-container'>
            <!-- <div class="col-12"> -->
            
                <nav id='main-navbar' class="navbar navbar-expand-md navbar-light">
                    
                    <button class="navbar-toggler navbar-toggler-left custom-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class='icon icon-menu'></i>
                        </span>
                    </button>
                        <div class="col-sm-6 col-md-3 nav-title-container">
                            
                            <a class="navbar-brand segregated" href="https://imodeljs.github.io/iModelJs-docs-output/reference" class="col-md-3">
                                <h1 id='site-title'><i class='icon icon-document'></i>API Reference</h1>                                
                            </a>

                        </div>
                        <div id='header-tabs' class='col-sm-6 col-md-3 nav-tabs-container'>
                            <nav class="navbar navbar-expand-md navbar-light">
                                 <ul class="bwc-tabs-horizontal green"><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output/getting-started">Getting Started</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output/overview">Overview</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output/bis">BIS</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output/learning">Learning</a></li><li class="active"><a href="https://imodeljs.github.io/iModelJs-docs-output/reference">Reference</a></li></ul> 
                            </nav>
                        </div>                </nav>
            
        </div>
        <!-- </div> -->

    </header>


    <div id='main-wrapper'>
    
            <div id='table-of-contents'>
                <span class='search-bar'>
                  <li>
                    <div id='search-container'>
                    </div>
                  </li>
                </span>
                
                <h2><a id="imodeljs-packages" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>iModelJs Packages</h2>
                <hr>
                <h3><a id="backend" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a><a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-backend/'>backend</a></h3>
                <h3><a id="frontend" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a><a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-frontend/'>frontend</a></h3>
                <h3><a id="common" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a><a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-common/'>common</a></h3>
                <h3><a id="clients" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a><a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-clients/'>clients</a></h3>
                <h2><a id="support-packages" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Support Packages</h2>
                <hr>
                <h3><a id="bentleyjs-core" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a><a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/bentleyjs-core/'>bentleyjs-core</a></h3>
                <h3><a id="geometry-core" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a><a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/geometry-core/'>geometry-core</a></h3>
                
            </div>
            <div class='row documentation-main'>
                <article id="main" name="main-content">
                    <h2><a id="autopush" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>AutoPush <span class="badge badge-pill badge-primary">Class</span></h2>
<p> <section class="tsd-panel tsd-comment">
Use AutoPush to automatically push local changes to a specified IModel. To do this,
create an AutoPush object, specifying the IModelDb that should be monitored.
The instance registers itself to react to events and timers. Often, backend will start
auto-pushing when an IModelDb is opened for read-write.</p>
<p></p><p><em>Example:</em></p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript">  IModelDb<span class="token punctuation">.</span>onOpened<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span>iModel<span class="token punctuation">:</span> IModelDb<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>iModel<span class="token punctuation">.</span>openMode <span class="token operator">!==</span> OpenMode<span class="token punctuation">.</span>ReadWrite<span class="token punctuation">)</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>

    <span class="token comment">// Setting a concurrency control policy is an example of something you might do in an onOpened event handler.</span>
    iModel<span class="token punctuation">.</span>concurrencyControl<span class="token punctuation">.</span><span class="token function">setPolicy</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ConcurrencyControl<span class="token punctuation">.</span>OptimisticPolicy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Starting AutoPush is an example of something you might do in an onOpened event handler.</span>
    <span class="token comment">// Note that AutoPush registers itself with IModelDb. That keeps it alive while the DB is open and releases it when the DB closes.</span>
    <span class="token keyword">new</span> <span class="token class-name">AutoPush</span><span class="token punctuation">(</span>iModel<span class="token punctuation">,</span> <span class="token function">readConfigParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>A service or agent would normally get its <a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-backend/imodels/autopushparams'>AutoPushParams</a> parameters from data provided
at deployment time. For example, a service might read configuration data from a .json file
that is deployed with the service.</p>
<pre class="no-line-numbers language-json line-numbers"><code class="language-json"><span class="token punctuation">{</span>
   <span class="token property">&quot;autoPush&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token property">&quot;pushIntervalSecondsMin&quot;</span><span class="token operator">:</span> $<span class="token punctuation">{</span>MYSERVICE-AUTOPUSH-INTERVAL-MIN<span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token property">&quot;pushIntervalSecondsMax&quot;</span><span class="token operator">:</span> $<span class="token punctuation">{</span>MYSERVICE-AUTOPUSH-INTERVAL-MAX<span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token property">&quot;autoSchedule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Note that the values of some of the configuration
property values are defined by placeholders denoted by <code>${some-macro-name}</code>. These placeholders
are to be replaced by EnvMacroSubst.replaceInProperties with the values of environment
values of the same names. These environment variables would typically be set by the deployment
mechanism from deployment parameters.</p>
<p>The service would read the configuration like this:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">readConfigParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;./MyService.config.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> defaultConfigValues<span class="token punctuation">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... define a property corresponding to each placeholder in the config file and a default value for it ... */</span>
    <span class="token string">&quot;some-macro-name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;its-default-value&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Replace ${some-macro-name} placeholders with actual environment variables,</span>
  <span class="token comment">// falling back on the supplied default values.</span>
  EnvMacroSubst<span class="token punctuation">.</span><span class="token function">replaceInProperties</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> defaultConfigValues<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p> </section></p>
<h3><a id="methods" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Methods</h3>
<table class="table table-responsive"><tbody><tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><a href="constructor">AutoPush</a> ( iModel: <a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-backend/imodels/imodeldb'>IModelDb</a>, params: <a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-backend/imodels/autopushparams'>AutoPushParams</a>, activityMonitor: <a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-backend/imodels/appactivitymonitor'>AppActivityMonitor</a> ): <a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-backend/imodels/autopush'>AutoPush</a></td>
<td>Construct an AutoPushManager.</td>
</tr>
<tr>
<td><a href="cancel">cancel</a> ( ): void <span class="badge badge-pill badge-primary">Public</span></td>
<td>Cancel the next auto-push.</td>
</tr>
<tr>
<td><a href="reserveCodes">reserveCodes</a> ( ): Promise <span class="badge badge-pill badge-primary">Public</span></td>
<td></td>
</tr>
<tr>
<td><a href="scheduleNextAutoPushIfNecessary">scheduleNextAutoPushIfNecessary</a> ( ): void <span class="badge badge-pill badge-primary">Public</span></td>
<td></td>
</tr>
<tr>
<td><a href="scheduleNextPush">scheduleNextPush</a> ( intervalSeconds: undefined|number ): void <span class="badge badge-pill badge-primary">Public</span></td>
<td></td>
</tr>
<tr>
<td><a href="validateAutoPushParams">validateAutoPushParams</a> ( params: any ): void <span class="badge badge-pill badge-primary">Static</span><span class="badge badge-pill badge-primary">Public</span></td>
<td>Check that &apos;params&apos; is a valid AutoPushParams object.</td>
</tr>
</tbody></table><h3><a id="accessors" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Accessors</h3>
<table class="table table-responsive"><tbody><tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td>autoSchedule: boolean <span class="badge badge-pill badge-primary">Public</span></td>
<td>The autoSchedule property</td>
</tr>
<tr>
<td>autoSchedule ( v: boolean ): void <span class="badge badge-pill badge-primary">Public</span></td>
<td>The autoSchedule property</td>
</tr>
<tr>
<td>durationOfLastPushMillis: number <span class="badge badge-pill badge-primary">Public</span></td>
<td>The length of time in milliseconds that the last push required to finish. Returns -1 if no push has yet been done.</td>
</tr>
<tr>
<td>endOfLastPushMillis: number <span class="badge badge-pill badge-primary">Public</span></td>
<td>The time that the last push finished in unix milliseconds. Returns 0 if no push has yet been done.</td>
</tr>
<tr>
<td>iModel: <a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-backend/imodels/imodeldb'>IModelDb</a> <span class="badge badge-pill badge-primary">Public</span></td>
<td>The IModelDb that this is auto-pushing.</td>
</tr>
<tr>
<td>lastError: any|undefined <span class="badge badge-pill badge-primary">Public</span></td>
<td>The last push error, if any.</td>
</tr>
<tr>
<td>state: <a href='https://imodeljs.github.io/iModelJs-docs-output/./reference/imodeljs-backend/imodels/autopushstate'>AutoPushState</a> <span class="badge badge-pill badge-primary">Public</span></td>
<td>Check the current state of this AutoPush.</td>
</tr>
</tbody></table><h3><a id="properties" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Properties</h3>
<p> <section class ="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-class tsd-is-static" ></p>
<h4><a id="event" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>event</h4>
<p>event: BeEvent</p>
<p> </section></p>

                    <p class='last-updated'>Last Updated: 
                        <span class='date-updated'>08 May, 2018 @ 02:19:31 pm -04:00</span>
                    </p>
    
                   
                   <script type="text/javascript">
                   
                   </script>                </article>
            </div>
            <div id='inner-table-of-contents'>
                <!-- 
                    - If the page is active
                    - Get all headings and subheadings and list them
                 -->
                
                
                
                
                  <div id='sticky-container'>
                    <h4 class='heading'>Overview</h4>
                    <div id="overview-container" class="clusterize-scroll">
                      <ul id='nav' class='right-nav nav flex-column clusterize-content'>
                          <li class='nav-item item active typeDocHeader'>
                        <a data-target="#inner-nav-autopush" class='title' href="#autopush"/>
                        <b class='dropdown-menu-title menu-text'>AutoPush</b>
                        <i class='dropdown icon'></i>
                        </a>
                        <ul id="inner-nav-autopush" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#methods">Methods</a>
                            </li>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#accessors">Accessors</a>
                            </li>
                            <li class='nav-item item '>
                                    <a data-target="#inner-nav-properties" class='title' href="#properties"/>
                                    <b class='dropdown-menu-title menu-text'>Properties</b>
                                    <i class='dropdown icon'></i>
                                    </a>
                                    <ul id="inner-nav-properties" class='inner-nav'>
                                        <li class='nav-item item '>
                                                <a class='title solo-title menu-text' href="#event">event</a>
                                        </li>
                                    </ul>
                            </li>
                        </ul>
                </li>
                 
                      </ul>
                    </div>
                  </div>
                
            </div>
        
    </div>
    

    
        <footer id='main-footer'>
            <div id='footer-content-container'>
               <div class='footer-footer'>
                   <p>Copyright 2018 Bentley Systems, Incorporated</p>
                </div>
            </div>
        </footer>
    </div>
        <a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
        <script src="https://imodeljs.github.io/iModelJs-docs-output/scripts/bundle.js" ></script>
    </body>
    
    </html>