<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bentley npm Script Guidelines - iModelJs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/prism.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico' /> 
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">
        <header id="main-header">
            <div class='row nav-container'>
                <nav id='main-navbar' class="navbar navbar-expand-md navbar-light">
                    
                    <button class="navbar-toggler navbar-toggler-left custom-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class='icon icon-menu'></i>
                        </span>
                    </button>
                    <div class="nav-title-container">
                        <a class="navbar-brand " href="https://imodeljs.github.io/iModelJs-docs-output//" class="col-md-3">
                            <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico" />
                            <h1 id="site-title">iModelJs</h1>
                        </a>
                    </div>
                    <div id='header-tabs' class='col-sm-6 col-md-3 nav-tabs-container'>
                        <nav class="navbar navbar-expand-md navbar-light">
                             <ul class="bwc-tabs-horizontal green"><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//overview">Overview</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class="active"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li></ul> 
                        </nav>
                    </div>                </nav>
            </div>

        </header>
        
<div id='main-wrapper'>
    <div id='table-of-contents'>
        <span class='search-bar'>
          <li>
            <div id='search-container'>
            </div>
          </li>
        </span>
        
        <ul id='main-navigation-list'>
            <html><head></head><body><h3 id="the imodeljs library"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/" class="table-of-contents-link">The iModelJs Library</a></h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/" class="table-of-contents-link">Frontend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/backend/" class="table-of-contents-link">Backend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/common/" class="table-of-contents-link">Common</a></li>
        </ul>
        <hr>
        <p>&#xA0;</p>
        <h3 id="helpful links">Helpful links</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/faq" class="table-of-contents-link">Frequently asked Questions</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary" class="table-of-contents-link">iModelJs Glossary</a></li>
        </ul>
        </body></html>
        </ul>    </div>
    <div class='row documentation-main'>
        <article id="main" name="main-content">
            <div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/">learning</a> > <a href="https://imodeljs.github.io/iModelJs-docs-output//learning/guidelines/">guidelines</a> > npm-scripts-guidelines</div>
            <h1 id="bentley npm script guidelines">Bentley npm Script Guidelines</h1>
<p>This document is intended to provide suggestions for writing your own package&apos;s npm scripts for things such as building, running tests, and adding code coverage. The imodeljs-related repositories have moved away from gulp and gulp plugins to favor a more direct approach of running tasks. This allows us to depend directly on various npm packages instead of relying on gulp &quot;middle-man&quot; plugins that may not see the same update frequency as the npm packages themselves. For examples of npm scripts in use, please look at both the imodeljs-core repository (a multi-package setup) and the geometry-core repository (a single package).</p>
<p>npm scripts are used by adding properties to the &quot;scripts&quot; object in a package&apos;s package.json file. These properties correspond to names that can be passed to the <code>npm run</code> command to execute the properties&apos; values as shell commands. For more information on creating and running scripts with npm, <a href="https://www.keithcirkel.co.uk/how-to-use-npm-as-a-build-tool/">this article</a> may be helpful to read.</p>
<p>The bentleyjs-tools repository includes a number of preconfigured node.js scripts to ease the development process. This includes scripts for testing, linting, and basic code coverage numbers. More information about these scripts can be found in the root bentleyjs-tools README.</p>
<h2 class="h-building"><a id="building" class="heading-anchor" href="#%s"></a>Building</h2>
<p>Suggested Package:</p>
<ul>
<li><a href="https://www.typescriptlang.org/">TypeScript</a></li>
</ul>
<p>With a properly configured tsconfig.json file, running the TypeScript compiler with <code>tsc</code> should be enough for backend libraries and simple backend agents/services. For more information about tsconfig properties, see the <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html">TypeScript website</a>.  Frontend services or applications may require the use of Webpack or another more involved build solution.</p>
<h2 class="h-cleaning-directories"><a id="cleaning-directories" class="heading-anchor" href="#%s"></a>Cleaning Directories</h2>
<p>Suggested Package:</p>
<ul>
<li><a href="https://github.com/isaacs/rimraf">rimraf</a></li>
</ul>
<p>Use rimraf as a cross-platform way to remove output folders (For example: rimraf ./lib). This package functions in a similar manner to the <code>rm -rf</code> command in Unix shells.</p>
<h2 class="h-copying-files"><a id="copying-files" class="heading-anchor" href="#%s"></a>Copying Files</h2>
<p>Suggested Package:</p>
<ul>
<li><a href="https://www.npmjs.com/package/cpx">cpx</a></li>
</ul>
<p>cpx is a cross-platform copy utility for copying globs of files from a source to a destination directory. Useful for copying around files such as test files or assets.</p>
<h2 class="h-testing"><a id="testing" class="heading-anchor" href="#%s"></a>Testing</h2>
<p>Suggested Package:</p>
<ul>
<li><a href="https://mochajs.org/">mocha</a></li>
</ul>
<p>Mocha is a flexible javascript test runner that can be used to run TypeScript test code in two ways: by either running the compiled JavaScript output of the TypeScript tests, or by running the TypeScript tests/source code directly using the <a href="https://github.com/TypeStrong/ts-node">ts-node</a>. Running Mocha with ts-node allows us to generate accurate code coverage numbers for the TypeScript source files.</p>
<h2 class="h-code-coverage"><a id="code-coverage" class="heading-anchor" href="#%s"></a>Code Coverage</h2>
<p>Suggested Package:</p>
<ul>
<li><a href="https://github.com/istanbuljs/nyc">nyc</a> (this is the command line utility for <a href="https://istanbul.js.org/">Istanbul</a>)</li>
</ul>
<p>Istanbul can be <a href="http://rundef.com/typescript-code-coverage-istanbul-nyc">used together with mocha</a> (in a ts-node configuration) to provide code coverage numbers and reports based on the package&apos;s test suite. This can be accomplished by running a ts-node test command directly with nyc (ex: <code>nyc run npm test:tsnode</code>). Several types of reports are available, such as a summary of coverage in the console window or an html output that shows specifically which statements have been covered.</p>
<h2 class="h-linting"><a id="linting" class="heading-anchor" href="#%s"></a>Linting</h2>
<p>Suggested Package:</p>
<ul>
<li><a href="https://palantir.github.io/tslint/">tslint</a></li>
</ul>
<p>TSLint can be run separate from VS Code by using the package&apos;s CLI. This can be useful for verifying code before committing or for testing linting rules as part of a continuous integration process.</p>
<h2 class="h-other-useful-packages"><a id="other-useful-packages" class="heading-anchor" href="#%s"></a>Other useful packages</h2>
<p><a href="https://github.com/TypeStrong/ts-node">ts-node</a> A typescript execution environment for code. Can be used to run Mocha tests and useful for generating code coverage percentages and reports.</p>
<p><a href="https://www.npmjs.com/package/tsconfig-paths">tsconfig-paths</a> - This may be necessary in multi-package repositories when dependencies are located using a folder&apos;s tsconfig &quot;baseUrl&quot; and &quot;paths&quot; attributes. This package is most often used with Mocha and ts-node to run tests directly from the TypeScript source files.</p>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>16 July, 2018 @ 08:07:35 pm -04:00</span>
            </p>

            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div id='inner-table-of-contents'>
        <!--
            - If the page is active
            - Get all headings and subheadings and list them
         -->
        
        
        
        
        <div id='sticky-container' style="top: 76px; position: fixed;">
          <h4 class='heading'>On this page</h4>
            <div id="overview-container" class="clusterize-scroll">
              <ul id='nav' class='right-nav nav flex-column clusterize-content'>
                      <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#building">Building</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#cleaning-directories">Cleaning Directories</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#copying-files">Copying Files</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#testing">Testing</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#code-coverage">Code Coverage</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#linting">Linting</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#other-useful-packages">Other useful packages</a>
            </li>
         
              </ul>
            </div>
          </div>
        
    </div>
</div>


    <footer id='main-footer'>
        <div id='footer-content-container'>
           <div class='footer-footer'>
               <p>Copyright 2018 Bentley Systems, Incorporated</p>
            </div>
        </div>
    </footer>
</div>
    <a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
    <script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js" ></script>
</body>

</html>