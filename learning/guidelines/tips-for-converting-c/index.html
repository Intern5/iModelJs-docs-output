<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Tips for Converting from C++ to TypeScript - iModelJs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output/styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output/styles/prism.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">

        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output/overview/imodeljs.ico' />
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output/ class='layout-index '>
    <span id="contentLoader"><p>Woah!  This page has a great deal of content...  Give us a second to load it.</p></span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">
    <header id="main-header">
        <div class='row nav-container'>
            <nav id='main-navbar' class="navbar navbar-expand-md navbar-light">
                    
                        <button class="navbar-toggler navbar-toggler-left custom-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false"
                            aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon">
                                <i class='icon icon-menu'></i>
                            </span>
                        </button>
                    <div class="nav-title-container">
                        <a class="navbar-brand " href="https://imodeljs.github.io/iModelJs-docs-output/" class="col-md-3">
                                <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output/overview/imodeljs.ico" />
                            <h1 id="site-title">iModelJs</h1>
                        </a>
                    </div>
                    <div id='header-tabs' class='col-sm-6 col-md-3 nav-tabs-container'>
                        <nav class="navbar navbar-expand-md navbar-light">
                             <ul class="bwc-tabs-horizontal green"><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output/overview">Overview</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output/getting-started">Getting Started</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output/bis">BIS</a></li><li class="active"><a href="https://imodeljs.github.io/iModelJs-docs-output/learning">Learning</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output/reference">API Reference</a></li></ul> 
                        </nav>
                    </div>            </nav>
        </div>

    </header>

<div id='main-wrapper'>
    <div id='table-of-contents'>
        <span class='search-bar'>
          <li>
            <div id='search-container'>
            </div>
          </li>
        </span>
        
        <ul id='main-navigation-list'>
            <html><head></head><body><h3 class="h-the-imodeljs-library"><a id="the-imodeljs-library" class="heading-anchor table-of-contents-link" href="#%s"><span>&#x1F517;</span></a><a href="https://imodeljs.github.io/iModelJs-docs-output/learning/" class="table-of-contents-link">The iModelJs Library</a></h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output/learning/frontend/" class="table-of-contents-link">Frontend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output/learning/backend/" class="table-of-contents-link">Backend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output/learning/common/" class="table-of-contents-link">Common</a></li>
        </ul>
        <hr>
        <p>&#xA0;</p>
        <h3 class="h-helpful-links"><a id="helpful-links" class="heading-anchor table-of-contents-link" href="#%s"><span>&#x1F517;</span></a>Helpful links</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output/./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output/./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output/./learning/faq" class="table-of-contents-link">Frequently asked Questions</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output/learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output/./learning/glossary" class="table-of-contents-link">iModelJs Glossary</a></li>
        </ul>
        </body></html>
        </ul>    </div>
    <div class='row documentation-main'>
        <article id="main" name="main-content">
            <div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output/learning/">learning</a> > <a href="https://imodeljs.github.io/iModelJs-docs-output/learning/guidelines/">guidelines</a> > tips-for-converting-c</div>
            <h1 id="tips for converting from c+-to typescript">Tips for Converting from C++ to TypeScript</h1>
<p>If you are converting existing C++ code to TypeScript, the following advice may be helpful.</p>
<h2 class="h-naming"><a id="naming" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Naming</h2>
<p>Follow the standard <a href='https://imodeljs.github.io/iModelJs-docs-output/./learning/guidelines/typescript-coding-guidelines'>TypeScript Coding Guidelines</a>, but in particular:</p>
<ul>
<li>method names in TypeScript always start with lower case letter. In C++ there is often the opposite convention, so every method name may change.</li>
<li>remove &quot;<code>m_</code>&quot; prefix on member variables. TypeScript requires the <code>this.</code> prefix so there is no ambiguity with local variables names. For private member variables use the &quot;<code>_</code>&quot; prefix convention.</li>
<li>remove prefixes from class names that don&apos;t add clarity. For example, <code>Dgn</code> should not be propagated.</li>
<li>exported names only need to be unique within a file. Remember that every export is implicitly qualified by the file name. If they are ambiguous in the context of another file&apos;s imports, they can be &quot;renamed&quot; unambiguously.</li>
</ul>
<h2 class="h-private-and-protected-members"><a id="private-and-protected-members" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Private and Protected members</h2>
<p>JavaScript does not support the concept of <em>private</em>, or <em>protected</em> members - they are TypeScript-only concepts. Therefore, there is no way to <em>really</em> stop someone from accessing members of a class.</p>
<p>Also, in C++, inlined accessor methods are &quot;compiled away&quot; and therefore add no runtime overhead. This is not true in JavaScript where accessor methods become members of the class prototype and have a runtime expense.</p>
<p>Therefore, in TypeScript there are fewer reasons to make members private and provide accessors. You will likely end up with <em>many more public members</em> in TypeScript. This implies an enhanced need for good and accurate documentation.</p>
<p>for example, in C++:</p>
<pre class="no-line-numbers language-c line-numbers"><code class="language-c"><span class="token keyword">struct</span> MyValue
<span class="token punctuation">{</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">int</span> m_val<span class="token punctuation">;</span>
public<span class="token punctuation">:</span>
    <span class="token function">MyValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>m_val<span class="token operator">=</span>val<span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">int</span> <span class="token function">GetValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> m_val<span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">SetValue</span><span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>m_val <span class="token operator">=</span> val<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>in TypeScript, can become:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">MyValue</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="h-constructors--destructors"><a id="constructors--destructors" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Constructors / Destructors</h2>
<p>TypeScript does not support:</p>
<ul>
<li>destructors</li>
<li>overloaded constructors</li>
</ul>
<p>You can only have one constructor, though often in JavaScript constructors test their argument types at runtime to allow more than one calling permutation. This happens every time the constructor is called, so be aware of performance implications.</p>
<p>TypeScript attempts to simulate the idea of multiple constructors, but since it compiles to JavaScript, that&apos;s not really possible. <strong>Avoid using multiple constructors in TypeScript.</strong></p>
<p>If there is any cleanup work in the C++ destructor, other than freeing memory, you need to create a <code>destroy</code>-like method on the TypeScript side and explicitly call it where appropriate. This is very unfamiliar to a Javascript programmer, since there is no way to actually delete an object in JavaScript</p>
<h2 class="h-enums"><a id="enums" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>enums</h2>
<p>In JavaScript, enums are a runtime object. This does have some advantages, such as the ability to reverse lookup the enum name from its value, and concepts like string enums and even heterogeneous enums. But, they add real overhead at runtime.</p>
<p>TypeScript adds an additional concept of <a href="https://www.typescriptlang.org/docs/handbook/enums.html">const enums</a>, which are similar to C++ enums. Const enums are completely invisible to JavaScript and are &quot;compiled away&quot; by the TypeScript compiler.</p>
<p>C++ enums should almost always be converted to <code>const enums</code> in TypeScript.</p>
<h2 class="h-virtual-methods"><a id="virtual-methods" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Virtual methods</h2>
<p>In JavaScript, <strong>all</strong> methods are virtual (actually, even member variables are &quot;virtual)&quot; in the C++ sense. That means that <em>any</em> method may be overridden in subclasses, even static methods.</p>
<p>Sometimes in C++ we have both a private virtual and public non-virtual method with the same name, except a leading underscore on the virtual method. This converts to just a single public method with the (previously virtual) implementation.</p>
<p>Note that TypeScript does not have an &quot;override&quot; keyword. So, if you attempt to override a method and misspell its name, you&apos;ll get no errors from the compiler. However, it will warn you about incorrect arguments and return types. This does complicate renaming methods on base classes, since no error is generated if the corresponding change is not reflected in subclasses.</p>
<p>TypeScript does support both abstract methods and abstract classes. In TypesScript just use the &quot;abstract&quot; keyword in both places.</p>
<h2 class="h-by-value-members"><a id="by-value-members" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>By-value members</h2>
<p>JavaScript only supports heap-based, garbage collected, objects. So, there is no way to create a class with a member that &quot;embeds&quot; another object by-value, as is common in C++.</p>
<p>Therefore, when converting C++ code with by-value members, often the best approach is to use a &quot;readonly&quot; member in TypeScript. The readonly keyword enforces that the reference in the member variable can only be initialized in the constructor. This is similar to what the compiler does in C++. Any attempt to reassign the value will generate a compile error, and you will have to use a copy-assignment, much like the copy constructor in C++.</p>
<p>For example, given the following C++ code:</p>
<pre class="no-line-numbers language-c line-numbers"><code class="language-c"><span class="token keyword">struct</span> ViewPlacement
<span class="token punctuation">{</span>
private<span class="token punctuation">:</span>
    Transform m_placement<span class="token punctuation">;</span>
    DgnViewportP m_viewport<span class="token punctuation">;</span>
public<span class="token punctuation">:</span>
    <span class="token function">ViewPlacement</span><span class="token punctuation">(</span>TransformCR placement<span class="token punctuation">,</span> DgnViewportP vp<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_placement</span><span class="token punctuation">(</span>placement<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_viewport</span><span class="token punctuation">(</span>vp<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">SetPlacement</span><span class="token punctuation">(</span>TransformCR placement<span class="token punctuation">)</span> <span class="token punctuation">{</span>m_placement <span class="token operator">=</span> placement<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>A natural straightforward conversion might look like:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript"><span class="token comment">// WRONG!!</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ViewPlacement</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> _placement<span class="token punctuation">:</span> Transform<span class="token punctuation">;</span>
  <span class="token keyword">private</span> _viewport<span class="token operator">?</span><span class="token punctuation">:</span> Viewport<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>placement<span class="token punctuation">:</span> Transform<span class="token punctuation">,</span> vp<span class="token operator">?</span><span class="token punctuation">:</span> Viewport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_placement <span class="token operator">=</span> placement<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_viewport <span class="token operator">=</span> vp<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">setPlacement</span><span class="token punctuation">(</span>placement<span class="token punctuation">:</span> Transform<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_placement <span class="token operator">=</span> placement<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The problem is that the <code>_placement</code> member holds a <em>reference</em> to, not a copy of, the constructor argument. If the caller changes the value of that Transform after calling the constructor, the ViewPlacement structure will see the changed version, not the original value. This can cause subtle and hard-to-find bugs. Note also that the C++ SetPlacement method actually silently invokes Transform&apos;s copy constructor.</p>
<p> A correct solution would be:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript"><span class="token comment">// Correct!!</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ViewPlacement</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> readonly _placement<span class="token punctuation">:</span> Transform<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>placement<span class="token punctuation">:</span> Transform<span class="token punctuation">,</span> <span class="token keyword">private</span> _viewport<span class="token operator">?</span><span class="token punctuation">:</span> Viewport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_placement <span class="token operator">=</span> placement<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">setPlacement</span><span class="token punctuation">(</span>placement<span class="token punctuation">:</span> Transform<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_placement<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span>placement<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you had forgot to use &quot;.setFrom&quot; in the setPlacement method, it would generate a compiler error.</p>
<p>Here&apos;s another example:</p>
<pre class="no-line-numbers language-c line-numbers"><code class="language-c"><span class="token keyword">struct</span> SomeParams <span class="token punctuation">:</span> RefCountedBase
<span class="token punctuation">{</span>
private<span class="token punctuation">:</span>
    DPoint3d m_origin<span class="token punctuation">;</span>
    RotMatrix m_rMatrix<span class="token punctuation">;</span>
    <span class="token keyword">double</span> m_scale<span class="token punctuation">;</span>
    bool m_invisible<span class="token punctuation">;</span>
    ColorDef m_color<span class="token punctuation">;</span>
    uint32_t m_weight<span class="token punctuation">;</span>
    bvector<span class="token operator">&lt;</span>LineType<span class="token operator">&gt;</span> m_lines<span class="token punctuation">;</span>
<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>can become:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SomeParams</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> readonly origin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point3d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> readonly rMatrix <span class="token operator">=</span> RotMatrix<span class="token punctuation">.</span><span class="token function">createIdentity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _scale<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _invisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _color<span class="token operator">?</span><span class="token punctuation">:</span> ColorDef<span class="token punctuation">;</span>
  <span class="token keyword">private</span> _weight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> readonly lines<span class="token punctuation">:</span> LineType<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Notes:</p>
<ul>
<li>in TypeScript everything is garbage collected, so <code>RefCountBase</code> is irrelevant.</li>
<li>any attempt to reassign <code>this.origin</code>, <code>this.rMatrix</code>, or <code>this.lines</code> will generate a compiler error. This matches the behavior in C++ where changes must always be copied by value. It may be less obvious in the case of <code>bvector</code>, but that is also by-value in C++.</li>
<li>the <code>_color</code> member now works differently in TypeScript than C++. It was converted to a &quot;reference that may be undefined&quot;. Care must be taken wherever code that uses <code>m_color</code> is converted to make sure it clones the input.</li>
<li>the <code>_scale</code> member is uninitialized in the declaration above. It <em>must</em> be initialized in the constructor.</li>
<li>if the C++ code provided &quot;GetOriginR&quot; and &quot;GetRMatrixR() methods, making them public readonly member variables is equivalent.</li>
</ul>
<h2 class="h-nested-classes"><a id="nested-classes" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Nested classes</h2>
<p>TypeScript does not support nested classes. Nested C++ classes become top-level classes in TypeScript. Sometimes it is helpful to use TypeScript namespaces to group classes with a common base name. But, that approach is not common in the TypeScript community because users must import the whole namespace as a single variable.</p>
<h2 class="h-id64"><a id="id64" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Id64</h2>
<p>In C++ we have a class for a 64-bit integer Id called <code>BeSQLite::BeBriefcaseBasedId</code>. We often make subclasses of it to differentiate the various types of things that can have a 64-bit Id. JavaScript does not have a native datatype for 64-bit integers. Therefore, we represent 64-bit Ids using hex-encoded strings. There is a class called <code>Id64</code> in <code>@bentleyjs-core/Id</code>. We do not make subclasses of <code>Id64</code>.</p>
<p>An important limitation of JavaScript is that the <code>Set</code> and <code>Map</code> classes do not allow any key types other than the native JavaScript types (vs. C++&apos;s ability to have user-defined key types.) This means that for the very common case of a collection of <code>Id64</code>s we can only use strings for the keys. There are <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html">type aliases</a> in <code>Id.ts</code> to help indicate that the strings are meant to be <code>Id64</code> strings.:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">type</span> Id64Set <span class="token operator">=</span> Set<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> Id64Array <span class="token operator">=</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>Note that unfortunately these are only aliases, the compiler does not enforce anything about the content of the string.</p>
<p>A common pattern in TypeScript is to write a single function that can accept <em>one or more</em> <code>Id64</code> values. Again, we have a type alias in <code>Id.ts</code>:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">type</span> Id64Arg <span class="token operator">=</span> Id64<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> Id64 <span class="token operator">|</span> Id64Set <span class="token operator">|</span> Id64Array <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</code></pre>
<p>This says that an argument of type <code>Id64Arg</code> can be:</p>
<ol>
<li>an array of Id64 objects</li>
<li>a single Id64 object</li>
<li>an <code>Id64Set</code> (<code>Set&lt;string&gt;</code>)</li>
<li>an <code>Id64Array</code> (<code>string[]</code>)</li>
<li>a single <code>string</code></li>
</ol>
<p>From a C++ perspective, this doesn&apos;t seem very type-safe, since <code>string</code> doesn&apos;t necessarily have to be a properly formatted Id64 value. While that is true, ignore that fact - in practice it doesn&apos;t hurt much.</p>
<p>To implement a function that takes an <code>Id64Arg</code>, use the static method:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript">  Id64<span class="token punctuation">.</span><span class="token function">toIdSet</span><span class="token punctuation">(</span>arg<span class="token punctuation">:</span> Id64Arg<span class="token punctuation">)</span><span class="token punctuation">:</span> Id64Set<span class="token punctuation">;</span>
</code></pre>
<p>That method converts any of the <code>Id64Arg</code> types into an <code>Id64Set</code>. This is a very convenient type, since it removes duplicate entries. For example:</p>
<pre class="no-line-numbers language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">FoundElements</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> found <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token function">addElements</span><span class="token punctuation">(</span>elements<span class="token punctuation">:</span> Id64Arg<span class="token punctuation">)</span> <span class="token punctuation">{</span> Id64<span class="token punctuation">.</span><span class="token function">toIdSet</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>found<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token function">dropElements</span><span class="token punctuation">(</span>elements<span class="token punctuation">:</span> Id64Arg<span class="token punctuation">)</span> <span class="token punctuation">{</span> Id64<span class="token punctuation">.</span><span class="token function">toIdSet</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>found<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">.</span> <span class="token punctuation">.</span> <span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="h-other-64-bit-integers"><a id="other-64-bit-integers" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Other 64-bit integers</h2>
<p>The largest integer representable in variable of type <code>number</code> in JavaScript is defined as <code>Number.MAX_SAFE_INTEGER</code>, which is 2<sup>53</sup>-1.</p>
<p>If you just happen to <em>know</em> that an <code>int64</code> type in C++ will never be larger than that, you can use a <code>number</code> [N.B. that is not entirely equivalent since nothing will enforce integer-ness. Though that problem exists for 32-bit integers as well]. Otherwise, things get much more complicated. One possibility is to use an ArrayBuffer, but that is somewhat complicated and rarely worthwhile. There are 64-bit JavaScript libraries, but they generally use conversion to strings to hold values, and are very inefficient compared to <code>number</code>.</p>
<p>Fortunately, other than the <code>Id64</code> case above, <code>int64</code> use cases are rare. Try to avoid them in C++ for this reason.</p>
<h2 class="h-guid"><a id="guid" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>GUID</h2>
<p>Use the <code>Guid</code> class from <code>@bentleyjs-core/Id</code>. It stores its value as a string in the &quot;8-4-4-4-12&quot; pattern.</p>
<h2 class="h-friend-classes"><a id="friend-classes" class="heading-anchor" href="#%s"><span>&#x1F517;</span></a>Friend classes</h2>
<p>JavaScript does not support the C++ <code>friend</code> class concept. This leads to more public member and methods in TypeScript. All you can do is &quot;hide&quot; a member/method in the documentation using the <code>@hidden</code> documentation keyword.</p>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>06 June, 2018 @ 01:01:45 pm -04:00</span>
            </p>

            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div id='inner-table-of-contents'>
        <!--
            - If the page is active
            - Get all headings and subheadings and list them
         -->
        
        
        
        
          <div id='sticky-container'>
            <h4 class='heading'>On this page</h4>
            <div id="overview-container" class="clusterize-scroll">
              <ul id='nav' class='right-nav nav flex-column clusterize-content'>
                      <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#naming">Naming</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#private-and-protected-members">Private and Protected members</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#constructors--destructors">Constructors / Destructors</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#enums">enums</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#virtual-methods">Virtual methods</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#by-value-members">By-value members</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#nested-classes">Nested classes</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#id64">Id64</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#other-64-bit-integers">Other 64-bit integers</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#guid">GUID</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#friend-classes">Friend classes</a>
            </li>
         
              </ul>
            </div>
          </div>
        
    </div>
</div>


    <footer id='main-footer'>
        <div id='footer-content-container'>
           <div class='footer-footer'>
               <p>Copyright 2018 Bentley Systems, Incorporated</p>
            </div>
        </div>
    </footer>
</div>
    <a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
    <script src="https://imodeljs.github.io/iModelJs-docs-output/scripts/bundle.js" ></script>
</body>

</html>