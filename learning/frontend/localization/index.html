<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Localization in iModelJs - iModelJs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/prism.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico' /> 
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">
        <header id="main-header">
            <div class='row nav-container'>
                <nav id='main-navbar' class="navbar navbar-expand-md navbar-light">
                    
                    <button class="navbar-toggler navbar-toggler-left custom-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class='icon icon-menu'></i>
                        </span>
                    </button>
                    <div class="nav-title-container">
                        <a class="navbar-brand " href="https://imodeljs.github.io/iModelJs-docs-output//" class="col-md-3">
                            <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico" />
                            <h1 id="site-title">iModelJs</h1>
                        </a>
                    </div>
                    <div id='header-tabs' class='col-sm-6 col-md-3 nav-tabs-container'>
                        <nav class="navbar navbar-expand-md navbar-light">
                             <ul class="bwc-tabs-horizontal green"><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//overview">Overview</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class="active"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li></ul> 
                        </nav>
                    </div>                </nav>
            </div>

        </header>
        
<div id='main-wrapper'>
    <div id='table-of-contents'>
        <span class='search-bar'>
          <li>
            <div id='search-container'>
            </div>
          </li>
        </span>
        
        <ul id='main-navigation-list'>
            <html><head></head><body><h3 id="the imodeljs library"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/" class="table-of-contents-link">The iModelJs Library</a></h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/" class="table-of-contents-link">Frontend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/backend/" class="table-of-contents-link">Backend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/common/" class="table-of-contents-link">Common</a></li>
        </ul>
        <hr>
        <p>&#xA0;</p>
        <h3 id="helpful links">Helpful links</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/faq" class="table-of-contents-link">Frequently asked Questions</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary" class="table-of-contents-link">iModelJs Glossary</a></li>
        </ul>
        </body></html>
        </ul>    </div>
    <div class='row documentation-main'>
        <article id="main" name="main-content">
            <div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/">learning</a> > <a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/">frontend</a> > Localization</div>
            <div class="edit-link"><span title="Page edit feature coming soon">Edit this page</span></div>
            <h1 id="localization in imodeljs">Localization in iModelJs</h1>
<p>An important consideration in every program is presenting information to the user in their preferred locale: language, date and time formatting, number formatting, etc. iModelJs provides localization capabilities for applications through the IModelApp.I18N object.</p>
<h2 class="h-language-translation"><a id="language-translation" class="heading-anchor" href="#%s"></a>Language translation</h2>
<p>Strings that are presented to the user must be localized. iModelJs handles that requirement in a straightforward way. Rather than specifying strings directly, a &quot;key&quot; is passed to the IModelApp.I18N.translate method, and the corresponding string for the current locale is retrieved for presentation to the user.</p>
<p>Of course, that doesn&apos;t happen by magic. The localization system needs a dictionary of key to string substitutions for each expected locale. That dictionary is actually spread over a number of JSON files that are placed into a locale-specific directory in the applications &quot;public&quot; folder. The key consists of a namespace (which identifies the specific JSON file in the locale directory, and thus must be unique across all packages in use), followed by a semicolon, followed by a period delimited tag that identifies the object within the JSON file.</p>
<p>For example, suppose you are developing an application called Irrigation and you want to group information, warning, and error messages into a localization namespace. Name the JSON file IrrigationMessages.json, put it into the public/locales/en directory, and put the following JSON in it:</p>
<pre class="no-line-numbers"><code class="language-json"> {
   &quot;info&quot;: {
     &quot;login&quot;: {
       &quot;notLoggedIn&quot;: &quot;You are not currently logged in to Bentley Connect.&quot;,
       &quot;loggedIn&quot;: &quot;You are logged in to Bentley Connect as {{userName}}.&quot;
     }
   },
   &quot;warning&quot;: {
     &quot;login&quot;: {
       &quot;mustLogin&quot;: &quot;That feature is unavailable unless you log in to Bentley Connect.&quot;,
       &quot;notAuthorized&quot;: &quot;You are not authorized to access that resource.&quot;
     }
   },
   &quot;error&quot;: {
     &quot;loginIncorrect&quot;: &quot;The username / password combination is not valid.&quot;,
     &quot;offline&quot;: &quot;Network connection not available.&quot;
   }
 }</code></pre>
<p>The messages can now be accessed by first registering the namespace, and then using the translate method:</p>
<pre class="no-line-numbers"><code class="language-typescript">messageNS: I18NNamespace = IModelApp.registerNamespace (&quot;IrrigationMessages&quot;);
await messageNS.readFinished;
if (this.notLoggedIn) {
  console.log (IModelApp.I18N.translate(&quot;IrrigationMessages:info.login.loggedIn&quot;)
} else {
  console.log (IModelApp.I18N.translate(&quot;IrrigationMessages:info.login.notLoggedIn&quot;, {userName: this.loginName});
}</code></pre>
<p>In the example above, we start by registering the namespace with IModelApp. That starts the process of retrieving IrrigationMessages.json file corresponding to the current locale (in this case, &quot;en&quot;) from the server. Since that might take a little while, before the first use of a namespace, we await on the readFinished property of the I18NNamespace, which is a Promise that is fulfilled when the file is retrieved and ready to be accessed from the translate method. If not logged in, we use the simple form of the translate method to display the string &quot;You are not currently logged in to Bentley Connect.&quot; to the console. If the user is logged in, the message &quot;You are logged in to Bentley Connect as xxx.&quot;, is displayed on the console, where xxx is replaced by this.loginName. This uses a second argument to the translate method that substitutes the properties of the object for the corresponding variables specified in the {{ }} formulas in the translation string, which is called &quot;interpolation&quot; in internationalization terminology.</p>
<p>Behind the scenes, iModelJs uses the <a href="http://www.i18next.com">i18Next</a> JavaScript package. It has many other sophisticated internationalization capabilities, including formatting, plurals, and nesting, as well as the interpolation example above. iModelJs initializes i18next with a set of options that are usually fine for all applications. If you want different options, you can use i18next directly from your application, or instantiate an instance of iModelJs&apos; I18N class, which provides some convenience methods for waiting for the read to finish, etc.</p>
<p>If you are using React for user interface development, please note that you should not put HTML markup in your localized strings for inclusion as text in your React controls. Such strings are not processed by the React transpiler, and thus the HTML tags will display verbatim rather than being processed as HTML.</p>
<h2 class="h-tool-localization"><a id="tool-localization" class="heading-anchor" href="#%s"></a>Tool Localization</h2>
<p>The primary way of initiating actions in iModelJs applications is by authoring a subclass of the <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/frontend/tools'>Tool</a> class. Each such Tool subclass is registered with the system by calling the register method on its class object. The register method takes an optional <em>nameSpace</em> argument that specifies the I18NNamespace that contains the localization strings for the tool, including its keyin, flyover, and description properties. The Tool&apos;s keyin property is used by the command parser to allow the user to type in the tool name to execute it. The flyover property is displayed when the cursor hovers over the Tool icon, and the description property is displayed in various contexts.</p>
<p>The keys for each of those properties are synthesized from the Tool&apos;s namespace and toolId. For example, the translation key for the keyin property is \&lt;Namespace&gt;:tools.\&lt;toolId&gt;.keyin. Now suppose you author a PlaceSprinkler command in the Irrigation application. Your Tool class might look like this:</p>
<pre class="no-line-numbers"><code class="language-typescript">class PlaceSprinkler extends InteractiveTool {
  public static toolId = &quot;Place.Sprinkler&quot;;
 ...
}

// register the PlaceSprinkler class.
const toyToolsNS: I18NNamespace = IModelApp.registerNamespace (&quot;IrrigationTools&quot;);
PlaceSprinkler.register(toyToolsNS);</code></pre>
<p>Then the appropriate entry in the english version of IrrigationTools.json file might look like this:</p>
<pre class="no-line-numbers"><code class="language-json"> {
   &quot;tools&quot;: {
     &quot;Place&quot;: {
       &quot;Sprinkler&quot;: {
         &quot;keyin&quot;: &quot;Place Sprinkler&quot;,
         &quot;flyover&quot;: &quot;Place Sprinkler Component.&quot;,
         &quot;description&quot;: &quot;Puts a new Sprinkler Component in the Irrigation System.&quot;,
         &quot;prompt1&quot;: &quot;Enter Sprinkler origin.&quot;,
         &quot;prompt2&quot;: &quot;Rotate Sprinkler to desired position.&quot;,
         &quot;successStatus&quot;: &quot;Sprinkler successfully placed.&quot;
       }
     }
   }
 }</code></pre>
<p>If you omit the &quot;flyover&quot; key, the keyin property is used for the flyover text. Similarly, if &quot;description&quot; key is not found, the fallback is the value of the flyover property.</p>
<p>In this example, the prompt1 and prompt2 keys are not used by the system - they could be used by your application during the operation of the Place Sprinkler command. They would be retrieved using this code:</p>
<pre class="no-line-numbers"><code class="language-typescript"> const firstPrompt: string = IModelApp.I18N.translate (&quot;IrrigationTools:Place.Sprinkler.prompt1&quot;);</code></pre>
<p>Since your code retrieves those localized strings, they do not have to be subkeys of &quot;tools.Place.Sprinkler&quot;. They could be separate keys in the same JSON file, or could even be in a different JSON file (in which case the use namespace would be different). The convention demonstrated in the example above has the advantage of keeping the localizable strings associated with a particular tool all together, but the disadvantage that prompts or messages that might be usable for multiple tools would be duplicated in each tool.</p>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>24 July, 2018 @ 08:50:23 am -04:00</span>
            </p>

            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div id='inner-table-of-contents'>
        <!--
            - If the page is active
            - Get all headings and subheadings and list them
         -->
        
        
        
        
        <div id='sticky-container' style="top: 76px; position: fixed;">
          <h4 class='heading'>On this page</h4>
            <div id="overview-container" class="clusterize-scroll">
              <ul id='nav' class='right-nav nav flex-column clusterize-content'>
                      <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#language-translation">Language translation</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#tool-localization">Tool Localization</a>
            </li>
         
              </ul>
            </div>
          </div>
        
    </div>
</div>


    <footer id='main-footer'>
        <div id='footer-content-container'>
           <div class='footer-footer'>
               <p>Copyright 2018 Bentley Systems, Incorporated</p>
            </div>
        </div>
    </footer>
</div>
    <a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
    <script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js" ></script>
</body>

</html>