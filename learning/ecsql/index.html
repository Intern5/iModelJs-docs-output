<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ECSQL - iModelJs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/bundle.css">
    <link rel="stylesheet" type="text/css" href="https://imodeljs.github.io/iModelJs-docs-output//styles/prism.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet"> 
        <link rel='shortcut icon' type='image/x-icon' href='https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico' /> 
</head>

<body data-site-root=https://imodeljs.github.io/iModelJs-docs-output// class='layout-index '>
    <span id="contentLoader">
        <p>Woah! This page has a great deal of content... Give us a second to load it.</p>
    </span>
    <span id="contentLoaderBackground"></span>
    <div id="flex-wrapper">
        <header id="main-header">
            <div class='row nav-container'>
                <nav id='main-navbar' class="navbar navbar-expand-md navbar-light">
                    
                    <button class="navbar-toggler navbar-toggler-left custom-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class='icon icon-menu'></i>
                        </span>
                    </button>
                    <div class="nav-title-container">
                        <a class="navbar-brand " href="https://imodeljs.github.io/iModelJs-docs-output//" class="col-md-3">
                            <img id="site-logo" class="site-logo" src="https://imodeljs.github.io/iModelJs-docs-output//overview/imodeljs.ico" />
                            <h1 id="site-title">iModelJs</h1>
                        </a>
                    </div>
                    <div id='header-tabs' class='col-sm-6 col-md-3 nav-tabs-container'>
                        <nav class="navbar navbar-expand-md navbar-light">
                             <ul class="bwc-tabs-horizontal green"><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//overview">Overview</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//getting-started">Getting Started</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//bis">BIS</a></li><li class="active"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning">Learning</a></li><li class=""><a href="https://imodeljs.github.io/iModelJs-docs-output//reference">API Reference</a></li></ul> 
                        </nav>
                    </div>                </nav>
            </div>

        </header>
        
<div id='main-wrapper'>
    <div id='table-of-contents'>
        <span class='search-bar'>
          <li>
            <div id='search-container'>
            </div>
          </li>
        </span>
        
        <ul id='main-navigation-list'>
            <html><head></head><body><h3 id="the imodeljs library"><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/" class="table-of-contents-link">The iModelJs Library</a></h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/frontend/" class="table-of-contents-link">Frontend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/backend/" class="table-of-contents-link">Backend</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/common/" class="table-of-contents-link">Common</a></li>
        </ul>
        <hr>
        <p>&#xA0;</p>
        <h3 id="helpful links">Helpful links</h3>
        <ul>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/ecsql" class="table-of-contents-link">ECSQL</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/wireformat" class="table-of-contents-link">Wire Format</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/faq" class="table-of-contents-link">Frequently asked Questions</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/guidelines/" class="table-of-contents-link">Guidelines and Tips</a></li>
        <li><a href="https://imodeljs.github.io/iModelJs-docs-output//./learning/glossary" class="table-of-contents-link">iModelJs Glossary</a></li>
        </ul>
        </body></html>
        </ul>    </div>
    <div class='row documentation-main'>
        <article id="main" name="main-content">
            <div class='bread-crumb-label'><a href="https://imodeljs.github.io/iModelJs-docs-output//learning/">learning</a> > ECSQL</div>
            <h1 id="ecsql">ECSQL</h1>
<blockquote>
<p>Make sure to check out the <a href='https://imodeljs.github.io/iModelJs-docs-output//learning/ecsqltutorial/'>ECSQL Tutorial</a> as well!</p>
</blockquote>
<h2 class="h-what-is-ecsql"><a id="what-is-ecsql" class="heading-anchor" href="#%s"></a>What is ECSQL</h2>
<p>ECSQL is a text-based command language for CRUD (create, read, update, delete) operations against
the business data in an iModel or ECDb file.</p>
<p>ECSQL is an implementation of SQL &#x2014; a proven, well-adopted text-based command language. It sticks to
standard SQL (SQL-92 and SQL-99) wherever possible.</p>
<p>Especially the SQL-99 standard came with a lot of features ECSchemas have too: boolean, date time, binary
data types, structs, arrays, polymorphism. This allows ECSQL to deviate only in very few exceptions from
standard SQL.</p>
<p>Anyone familiar with SQL should intuitively understand ECSQL.</p>
<p>The <strong>key difference between ECSQL and SQL</strong> is that ECSQL targets the <em>logical</em> schema, and not the
underlying database&#x2019;s <em>persistence</em> schema.</p>
<p><img src=".././ecsql_vs_sql.png" alt="ECSQL versus SQL" title="ECSQL versus SQL"></p>
<h2 class="h-ecsql-in-detail"><a id="ecsql-in-detail" class="heading-anchor" href="#%s"></a>ECSQL in detail</h2>
<p>This is not a comprehensive documentation of the SQL subset of ECSQL. This document only describes the exceptions
to standard SQL and the cases where less known features of the standard are used.
Standard SQL refers to SQL-92 (aka SQL 2), and to SQL-99 (aka SQL 3) whenever SQL-92 is not sufficient.</p>
<blockquote>
<p>All ECSQL examples in the following sections refer to classes and relationships from the <a
            class='missingLink'
            href='https://imodeljs.github.io/iModelJs-docs-output//..\bis\domains\biscore\biscore.ecschema'
            data-toggle='tooltip'
            data-html=true
            data-placement='top'
            title='<small>Link not found. Attempting: https://imodeljs.github.io/iModelJs-docs-output//..\bis\domains\biscore\biscore.ecschema</small>'>
            BisCore
            </a> ECSchema (unless mentioned otherwise).</p>
</blockquote>
<h2 class="h-fully-qualifying-ecclasses-in-ecsql"><a id="fully-qualifying-ecclasses-in-ecsql" class="heading-anchor" href="#%s"></a>Fully qualifying ECClasses in ECSQL</h2>
<p>The classes used in an ECSQL have to be fully qualified by their schemas.</p>
<p>Syntax: <code>&lt;Schema name or alias&gt;.&lt;Class name&gt;</code></p>
<blockquote>
<p>Instead of &apos;.&apos; you can also use &apos;:&apos; as delimiter between schema and class name.</p>
</blockquote>
<h3 class="h-example"><a id="example" class="heading-anchor" href="#%s"></a>Example</h3>
<p>The following examples are equivalent. This one uses the schema name:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT Model, CodeValue, Parent FROM BisCore.Element
</code></pre>
<p>And this one uses the schema alias:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT Model, CodeValue, Parent FROM bis.Element
</code></pre>
<h2 class="h-ecsql-parameters"><a id="ecsql-parameters" class="heading-anchor" href="#%s"></a>ECSQL Parameters</h2>
<p>To bind values to an ECSQL statement after preparation, the following parameter placeholders are
supported.</p>
<table class="table table-responsive"><tbody><tr>
<th>Parameter type</th>
<th>Description</th>
</tr>
<tr>
<td><code>?</code></td>
<td>Positional parameter. Its index is one greater than the previous parameter in the ECSQL statement.</td>
</tr>
<tr>
<td><code>:aaa</code></td>
<td>Named parameter. This allows to bind the same value to more than one placeholder.</td>
</tr>
</tbody></table><h3 class="h-example-1"><a id="example-1" class="heading-anchor" href="#%s"></a>Example</h3>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId FROM bis.GeometricElement3d WHERE Model=? AND LastMod&gt;=?
</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId FROM bis.GeometricElement3d LIMIT :pagesize OFFSET (:pageno * :pagesize)
</code></pre>
<p>See also sections <a href="#ecinstanceid-and-ecclassid">ECInstanceId and ECClassId</a> and <a href="#limit-and-offset">LIMIT and OFFSET</a>.</p>
<h2 class="h-ecinstanceid-and-ecclassid"><a id="ecinstanceid-and-ecclassid" class="heading-anchor" href="#%s"></a>ECInstanceId and ECClassId</h2>
<p>ECSQL defines a set of built-in system properties. They don&apos;t have to be defined in the ECSchemas.</p>
<table class="table table-responsive"><tbody><tr>
<th>Property</th>
<th>Description</th>
</tr>
<tr>
<td>ECInstanceId</td>
<td>Is the unique identifier for an ECInstance.</td>
</tr>
<tr>
<td>ECClassId</td>
<td>Refers to the ECClassId of an ECClass. It uniquely identifies an ECClass in the iModel.</td>
</tr>
</tbody></table><blockquote>
<p>In iModelJs the <em>ECClassId</em> is formatted as fully qualified class name when used in the SELECT clause.</p>
</blockquote>
<h3 class="h-example-2"><a id="example-2" class="heading-anchor" href="#%s"></a>Example</h3>
<pre class="no-line-numbers"><code class="language-sql">SELECT Parent, ECClassId FROM bis.Element WHERE ECInstanceId=123
</code></pre>
<h2 class="h-basic-data-types-in-ecsql"><a id="basic-data-types-in-ecsql" class="heading-anchor" href="#%s"></a>Basic data types in ECSQL</h2>
<p>ECSQL supports all primitive types built into EC. This means that in addition to the basic numeric and string data types in SQL-92, ECSQL also supports boolean, BLOBs, date-times and points.</p>
<h3 class="h-boolean"><a id="boolean" class="heading-anchor" href="#%s"></a>Boolean</h3>
<p>For Boolean types ECSQL supports the literals <code>True</code> and <code>False</code>.</p>
<h4 class="h-examples"><a id="examples" class="heading-anchor" href="#%s"></a>Examples</h4>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.ViewDefinition3d WHERE IsCameraOn = True
</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.ViewDefinition3d WHERE IsCameraOn = False
</code></pre>
<p>Boolean properties or expressions do not need to be compared to <code>True</code> and <code>False</code> as they return a
boolean value already. So the above examples can also be written like this:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.ViewDefinition3d WHERE IsCameraOn
</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.ViewDefinition3d WHERE NOT IsCameraOn
</code></pre>
<h3 class="h-datetime"><a id="datetime" class="heading-anchor" href="#%s"></a>DateTime</h3>
<p>ECSQL supports both dates without time (<code>DATE</code>) and dates with time (<code>TIMESTAMP</code>).</p>
<blockquote>
<p>ECSQL does not support time zone conversions. Time zone conversions are to be handled by the application.</p>
</blockquote>
<h4 class="h-literals"><a id="literals" class="heading-anchor" href="#%s"></a>Literals</h4>
<p><code>DATE &apos;yyyy-mm-dd&apos;</code></p>
<p><code>TIMESTAMP &apos;yyyy-mm-dd hh:mm:ss[.nnn][Z]&apos;</code></p>
<p>The time stamp format matches the <a href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO 8601 standard</a> (see also <a href="https://en.wikipedia.org/wiki/ISO_8601">https://en.wikipedia.org/wiki/ISO_8601</a>)</p>
<h4 class="h-basic-functions"><a id="basic-functions" class="heading-anchor" href="#%s"></a>Basic functions</h4>
<table class="table table-responsive"><tbody><tr>
<th>Function</th>
<th>Description</th>
</tr>
<tr>
<td><code>CURRENT_DATE</code></td>
<td>returns the current date</td>
</tr>
<tr>
<td><code>CURRENT_TIMESTAMP</code></td>
<td>returns the current timestamp in UTC.</td>
</tr>
</tbody></table><h4 class="h-example-3"><a id="example-3" class="heading-anchor" href="#%s"></a>Example</h4>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.Element WHERE LastMod &gt; DATE &apos;2018-01-01&apos;
</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.Element WHERE LastMod &lt; TIMESTAMP &apos;2017-07-15T12:00:00.000Z&apos;`
</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.Element WHERE LastMod BETWEEN :startperiod AND :endperiod`
</code></pre>
<h3 class="h-points"><a id="points" class="heading-anchor" href="#%s"></a>Points</h3>
<p>Points are a built-in primitive type in ECSchemas and are therefore supported in ECSQL.</p>
<p>In the context of ECSQL Point ECProperties are interpreted as structs made up of the
following system properties:</p>
<table class="table table-responsive"><tbody><tr>
<th>Property</th>
<th>Description</th>
</tr>
<tr>
<td>X</td>
<td>X coordinate of the Point2d or Point3d</td>
</tr>
<tr>
<td>Y</td>
<td>Y coordinate of the Point2d or Point3d</td>
</tr>
<tr>
<td>Z</td>
<td>Z coordinate of the Point3d</td>
</tr>
</tbody></table><h4 class="h-example-4"><a id="example-4" class="heading-anchor" href="#%s"></a>Example</h4>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId, Model, CodeValue FROM bis.GeometricElement3d
WHERE Origin.X BETWEEN 3500000.0 AND 3500500.0 AND
Origin.Y BETWEEN 5700000.0 AND 5710000.0 AND
Origin.Z BETWEEN 0 AND 100.0
</code></pre>
<h2 class="h-structs"><a id="structs" class="heading-anchor" href="#%s"></a>Structs</h2>
<p>In ECSQL you can refer to a struct ECProperty either as a whole or by just referring to some of its members.
The operator for referencing members of structs in an ECSQL is the &apos;.&apos;.</p>
<h3 class="h-examples-1"><a id="examples-1" class="heading-anchor" href="#%s"></a>Examples</h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT Location FROM myschema.Company WHERE Name=&apos;ACME&apos;</code></td>
<td>Returns the Location struct property as a whole</td>
</tr>
<tr>
<td><code>SELECT Name,Location.Street,Location.City FROM myschema.Company WHERE ECInstanceId=?</code></td>
<td>Returns the Street and City members of the Location struct property</td>
</tr>
<tr>
<td><code>SELECT Name FROM myschema.Company WHERE Location=?</code></td>
<td>Returns rows that match the bound Location value. The Location must be bound as a whole.</td>
</tr>
<tr>
<td><code>SELECT Name FROM myschema.Company WHERE Location.Zip=12314</code></td>
<td>Returns rows that match the Location&apos;s Zip member value</td>
</tr>
</tbody></table><p>based on this ECSchema snippet:</p>
<pre class="no-line-numbers"><code class="language-xml">&lt;ECStructClass typeName=&quot;Address&quot;&gt;
  &lt;ECProperty propertyName=&quot;Street&quot; typeName=&quot;string&quot; /&gt;
  &lt;ECProperty propertyName=&quot;City&quot; typeName=&quot;string&quot; /&gt;
  &lt;ECProperty propertyName=&quot;Zip&quot; typeName=&quot;int&quot; /&gt;
&lt;/ECStructClass&gt;
&lt;ECEntityClass typeName=&quot;Company&quot;&gt;
  &lt;ECProperty propertyName=&quot;Name&quot; typeName=&quot;string&quot; /&gt;
  &lt;ECArrayProperty propertyName=&quot;Location&quot; typeName=&quot;Address&quot; /&gt;
&lt;/ECEntityClass&gt;
</code></pre>
<h2 class="h-arrays"><a id="arrays" class="heading-anchor" href="#%s"></a>Arrays</h2>
<p>In ECSQL you can refer to Array ECProperties only as a whole.</p>
<h3 class="h-examples-2"><a id="examples-2" class="heading-anchor" href="#%s"></a>Examples</h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT PhoneNumbers FROM myschema.Company WHERE Name=&apos;ACME&apos;</code></td>
<td>Returns the PhoneNumbers array of the ACME company</td>
</tr>
<tr>
<td><code>SELECT Name FROM myschema.Company WHERE PhoneNumbers=?</code></td>
<td>Returns the companies that match the bound PhoneNumber array. The array must be bound as a whole.</td>
</tr>
</tbody></table><p>based on this ECSchema snippet:</p>
<pre class="no-line-numbers"><code class="language-xml">&lt;ECEntityClass typeName=&quot;Company&quot;&gt;
  &lt;ECProperty propertyName=&quot;Name&quot; typeName=&quot;string&quot; /&gt;
  &lt;ECArrayProperty propertyName=&quot;PhoneNumbers&quot; typeName=&quot;string&quot; /&gt;
&lt;/ECEntityClass&gt;
</code></pre>
<h2 class="h-navigation-properties"><a id="navigation-properties" class="heading-anchor" href="#%s"></a>Navigation Properties</h2>
<p>Navigation properties are ECProperties that point to a related object. They are always backed by an ECRelationshipClass.</p>
<p>In the context of ECSQL navigation properties are interpreted as structs made up of the
following system properties:</p>
<table class="table table-responsive"><tbody><tr>
<th>Property</th>
<th>Description</th>
</tr>
<tr>
<td><code>Id</code></td>
<td>ECInstanceId of the related instance</td>
</tr>
<tr>
<td><code>RelECClassId</code></td>
<td>ECClassId of the ECRelationshipClass backing the navigation property. It is mainly relevant when the ECRelationshipClass has subclasses.</td>
</tr>
</tbody></table><blockquote>
<p>Navigation properties are a convenient short-cut for <a href="#joins">ECSQL Joins</a>.</p>
</blockquote>
<p>See also <a href="#ecrelationshipclasses">ECRelationshipClasses</a>.</p>
<h3 class="h-examples-3"><a id="examples-3" class="heading-anchor" href="#%s"></a>Examples</h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT Parent FROM bis.Element WHERE ECInstanceId=?</code></td>
<td>Returns the Parent navigation property as a whole (including Id and RelECClassId)</td>
</tr>
<tr>
<td><code>SELECT Parent.Id FROM bis.Element WHERE ECInstanceId=?</code></td>
<td>Returns just the Id member of the Parent navigation property</td>
</tr>
<tr>
<td><code>SELECT Parent.Id, Parent.RelECClassId FROM bis.Element WHERE ECInstanceId=?</code></td>
<td>Returns the Id, and the RelECClassId member of the Parent navigation property as two separate columns</td>
</tr>
</tbody></table><h2 class="h-ecrelationshipclasses"><a id="ecrelationshipclasses" class="heading-anchor" href="#%s"></a>ECRelationshipClasses</h2>
<p>As ECRelationshipClasses are ECClasses as well, they can be used in ECSQL like ECClasses. Their additional relationship semantics is expressed by these system properties.</p>
<table class="table table-responsive"><tbody><tr>
<th>Property</th>
<th>Description</th>
</tr>
<tr>
<td><code>SourceECInstanceId</code></td>
<td>ECInstanceId of the instance on the <em>source</em> end of the relationship</td>
</tr>
<tr>
<td><code>SourceECClassId</code></td>
<td>ECClassId of the instance on the <em>source</em> end of the relationship</td>
</tr>
<tr>
<td><code>TargetECInstanceId</code></td>
<td>ECInstanceId of the instance on the <em>target</em> end of the relationship</td>
</tr>
<tr>
<td><code>TargetECClassId</code></td>
<td>ECClassId of the instance on the <em>target</em> end of the relationship</td>
</tr>
</tbody></table><blockquote>
<p>If the ECRelationshipClass is backed by a <a href="#navigation-properties">Navigation property</a>, it is usually much easier to use the navigation property in your ECSQL than the ECRelationshipClass.</p>
</blockquote>
<h3 class="h-examples-4"><a id="examples-4" class="heading-anchor" href="#%s"></a>Examples</h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT SourceECInstanceId FROM bis.ElementDrivesElement WHERE TargetECInstanceId=? AND Status=?</code></td>
<td>Returns the ECInstanceId of all Elements that drive the Element bound to the first parameter</td>
</tr>
<tr>
<td><code>SELECT TargetECInstanceId,TargetECClassId FROM bis.ModelHasElements WHERE SourceECInstanceId=?</code></td>
<td>Returns the ECInstanceId and ECClassId of all Elements contained by the Model bound to the parameter</td>
</tr>
</tbody></table><h2 class="h-joins"><a id="joins" class="heading-anchor" href="#%s"></a>Joins</h2>
<p>Joins between ECClasses are specified with the standard SQL join syntax (either <code>JOIN</code> ... <code>ON</code> ... or the <em>theta</em> style).</p>
<p>In ECSchemas ECRelationshipClasses are used to relate two ECClasses. ECRelationshipClasses can therefore be seen as virtual link tables between those two classes. If you want to join two ECClasses via their ECRelationshipClass, you need to join the first class to the relationship class and then the relationship class to the second class.</p>
<p>If <a href="#navigation-properties">navigation properties</a> are defined for the ECRelationship class, use the navigation property instead of a join.</p>
<h4 class="h-examples-5"><a id="examples-5" class="heading-anchor" href="#%s"></a>Examples</h4>
<p>Without navigation property (2 JOINs needed):</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT e.CodeValue,e.UserLabel FROM bis.Element driver JOIN bis.ElementDrivesElement ede ON driver.ECInstanceId=ede.SourceECInstanceId JOIN bis.Element driven ON driven.ECInstanceId=ede.TargetECInstanceId WHERE driven.ECInstanceId=? AND ede.Status=?
</code></pre>
<p>With navigation property (Element.Model):</p>
<p>Return the CodeValue and UserLabel of all Elements in the Model with the specified condition (1 JOIN needed):</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT e.CodeValue,e.UserLabel FROM bis.Element e JOIN bis.Model m ON e.Model.Id=m.ECInstanceId WHERE m.Name=?
</code></pre>
<p>Return the Model for an Element with the specified condition (No join needed):</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT Model FROM bis.Element WHERE ECInstanceId=?
</code></pre>
<h2 class="h-polymorphic-queries"><a id="polymorphic-queries" class="heading-anchor" href="#%s"></a>Polymorphic Queries</h2>
<p>By default, any ECClass in the FROM clause of an ECSQL is treated polymorphically, i.e. all its subclasses are considered as well. If an ECClass should be treated non-polymorphically, i.e. only the class itself and not its subclasses should be considered, add the <code>ONLY</code> keyword in front of it.</p>
<blockquote>
<p>This also applies to <a href='https://imodeljs.github.io/iModelJs-docs-output//./bis/intro/mixins'>Mixins</a>. Mixins technically are ECClasses (abstract Entity ECClasses to be precise). So you can simply query against a mixin class without knowing which classes actually implement the mixin.</p>
</blockquote>
<h3 class="h-examples-6"><a id="examples-6" class="heading-anchor" href="#%s"></a>Examples</h3>
<table class="table table-responsive"><tbody><tr>
<th>ECSQL</th>
<th>Description</th>
</tr>
<tr>
<td><code>SELECT ECInstanceId FROM bis.Element WHERE Model=?`</code></td>
<td>Returns all Elements of any subclass in the specified Model</td>
</tr>
<tr>
<td><code>SELECT ECInstanceId FROM bis.SpatialViewDefinition WHERE ModelSelector=?`</code></td>
<td>Returns SpatialViewDefinitions rows and rows of its subclasses for the specified ModelSelector</td>
</tr>
<tr>
<td><code>SELECT ECInstanceId FROM ONLY bis.SpatialViewDefinition WHERE ModelSelector=?`</code></td>
<td>Returns only SpatialViewDefinitions rows for the specified ModelSelect, but no rows from its subclasse.</td>
</tr>
</tbody></table><h2 class="h-limit-and-offset"><a id="limit-and-offset" class="heading-anchor" href="#%s"></a>LIMIT and OFFSET</h2>
<p>One way to implement paging is to use the <code>LIMIT</code> and <code>OFFSET</code> clauses in ECSQL.
The <code>LIMIT</code> clause is used to limit the number of results returned from an ECSQL statement. Using <code>LIMIT</code>
together with <code>OFFSET</code> allows specifying a range of rows to be returned. The <code>OFFSET</code> hereby specifies how many rows will be omitted from the result set. The <code>LIMIT</code> specifies the number of rows to be
returned.</p>
<h3 class="h-examples-7"><a id="examples-7" class="heading-anchor" href="#%s"></a>Examples</h3>
<p>Return only the first 50 matching Elements:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId,CodeValue,Parent FROM BisCore.Element WHERE Model=? LIMIT 50
</code></pre>
<p>Return the 201st through 250th matching Element:</p>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId,CodeValue,Parent FROM BisCore.Element WHERE Model=? LIMIT 50 OFFSET 200
</code></pre>
<h2 class="h-sql-functions"><a id="sql-functions" class="heading-anchor" href="#%s"></a>SQL Functions</h2>
<p>SQL functions, either built into SQLite or custom SQL functions, can be used in ECSQL.</p>
<h3 class="h-examples-8"><a id="examples-8" class="heading-anchor" href="#%s"></a>Examples</h3>
<pre class="no-line-numbers"><code class="language-sql">SELECT substr(CodeValue,1,5) FROM bis.Element WHERE Model=?`
</code></pre>
<pre class="no-line-numbers"><code class="language-sql">SELECT ECInstanceId FROM bis.Element WHERE lower(UserLabel)=?`
</code></pre>
<p>See also <a href="https://www.sqlite.org/lang_corefunc.html">SQLite Functions overview</a>.</p>
<h2 class="h-spatial-queries-and-geometry-functions"><a id="spatial-queries-and-geometry-functions" class="heading-anchor" href="#%s"></a>Spatial Queries and Geometry Functions</h2>
<p>ECSQL can perform <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/spatialqueries'>spatial queries</a>.</p>
<p>ECSQL has a number of <a href='https://imodeljs.github.io/iModelJs-docs-output//./learning/geometrysqlfuncs'>built-in geometry functions</a></p>

            <p class='last-updated'>Last Updated:
                <span class='date-updated'>16 July, 2018 @ 08:07:35 pm -04:00</span>
            </p>

            
            <script type="text/javascript">
            
            </script>        </article>
    </div>
    <div id='inner-table-of-contents'>
        <!--
            - If the page is active
            - Get all headings and subheadings and list them
         -->
        
        
        
        
        <div id='sticky-container' style="top: 76px; position: fixed;">
          <h4 class='heading'>On this page</h4>
            <div id="overview-container" class="clusterize-scroll">
              <ul id='nav' class='right-nav nav flex-column clusterize-content'>
                      <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#what-is-ecsql">What is ECSQL</a>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#ecsql-in-detail">ECSQL in detail</a>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-fully-qualifying-ecclasses-in-ecsql" class='title' href="#fully-qualifying-ecclasses-in-ecsql"/>
                    <b class='dropdown-menu-title menu-text'>Fully qualifying ECClasses in ECSQL</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-fully-qualifying-ecclasses-in-ecsql" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#example">Example</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-ecsql-parameters" class='title' href="#ecsql-parameters"/>
                    <b class='dropdown-menu-title menu-text'>ECSQL Parameters</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-ecsql-parameters" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#example-1">Example</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-ecinstanceid-and-ecclassid" class='title' href="#ecinstanceid-and-ecclassid"/>
                    <b class='dropdown-menu-title menu-text'>ECInstanceId and ECClassId</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-ecinstanceid-and-ecclassid" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#example-2">Example</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-basic-data-types-in-ecsql" class='title' href="#basic-data-types-in-ecsql"/>
                    <b class='dropdown-menu-title menu-text'>Basic data types in ECSQL</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-basic-data-types-in-ecsql" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a data-target="#inner-nav-boolean" class='title' href="#boolean"/>
                                    <b class='dropdown-menu-title menu-text'>Boolean</b>
                                    <i class='dropdown icon'></i>
                                    </a>
                                    <ul id="inner-nav-boolean" class='inner-nav'>
                                            <li class='nav-item item '>
                                                    <a class='title solo-title menu-text' href="#examples">Examples</a>
                                            </li>
                                    </ul>
                            </li>
                            <li class='nav-item item '>
                                    <a data-target="#inner-nav-datetime" class='title' href="#datetime"/>
                                    <b class='dropdown-menu-title menu-text'>DateTime</b>
                                    <i class='dropdown icon'></i>
                                    </a>
                                    <ul id="inner-nav-datetime" class='inner-nav'>
                                            <li class='nav-item item '>
                                                    <a class='title solo-title menu-text' href="#literals">Literals</a>
                                            </li>
                                            <li class='nav-item item '>
                                                    <a class='title solo-title menu-text' href="#basic-functions">Basic functions</a>
                                            </li>
                                            <li class='nav-item item '>
                                                    <a class='title solo-title menu-text' href="#example-3">Example</a>
                                            </li>
                                    </ul>
                            </li>
                            <li class='nav-item item '>
                                    <a data-target="#inner-nav-points" class='title' href="#points"/>
                                    <b class='dropdown-menu-title menu-text'>Points</b>
                                    <i class='dropdown icon'></i>
                                    </a>
                                    <ul id="inner-nav-points" class='inner-nav'>
                                            <li class='nav-item item '>
                                                    <a class='title solo-title menu-text' href="#example-4">Example</a>
                                            </li>
                                    </ul>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-structs" class='title' href="#structs"/>
                    <b class='dropdown-menu-title menu-text'>Structs</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-structs" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#examples-1">Examples</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-arrays" class='title' href="#arrays"/>
                    <b class='dropdown-menu-title menu-text'>Arrays</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-arrays" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#examples-2">Examples</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-navigation-properties" class='title' href="#navigation-properties"/>
                    <b class='dropdown-menu-title menu-text'>Navigation Properties</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-navigation-properties" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#examples-3">Examples</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-ecrelationshipclasses" class='title' href="#ecrelationshipclasses"/>
                    <b class='dropdown-menu-title menu-text'>ECRelationshipClasses</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-ecrelationshipclasses" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#examples-4">Examples</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-joins" class='title' href="#joins"/>
                    <b class='dropdown-menu-title menu-text'>Joins</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-joins" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#examples-5">Examples</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-polymorphic-queries" class='title' href="#polymorphic-queries"/>
                    <b class='dropdown-menu-title menu-text'>Polymorphic Queries</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-polymorphic-queries" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#examples-6">Examples</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-limit-and-offset" class='title' href="#limit-and-offset"/>
                    <b class='dropdown-menu-title menu-text'>LIMIT and OFFSET</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-limit-and-offset" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#examples-7">Examples</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a data-target="#inner-nav-sql-functions" class='title' href="#sql-functions"/>
                    <b class='dropdown-menu-title menu-text'>SQL Functions</b>
                    <i class='dropdown icon'></i>
                    </a>
                    <ul id="inner-nav-sql-functions" class='inner-nav'>
                            <li class='nav-item item '>
                                    <a class='title solo-title menu-text' href="#examples-8">Examples</a>
                            </li>
                    </ul>
            </li>
               <li class='nav-item item '>
                    <a class='title solo-title menu-text' href="#spatial-queries-and-geometry-functions">Spatial Queries and Geometry Functions</a>
            </li>
         
              </ul>
            </div>
          </div>
        
    </div>
</div>


    <footer id='main-footer'>
        <div id='footer-content-container'>
           <div class='footer-footer'>
               <p>Copyright 2018 Bentley Systems, Incorporated</p>
            </div>
        </div>
    </footer>
</div>
    <a href="javascript:" id="return-to-top"><i class="icon icon-chevron-up"></i></a>
    <script src="https://imodeljs.github.io/iModelJs-docs-output//scripts/bundle.js" ></script>
</body>

</html>